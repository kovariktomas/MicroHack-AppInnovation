@page "/figure/{Id}"
@using Microsoft.AspNetCore.Components
@using Microsoft.AspNetCore.Components.Routing
@inject FigureCatalogService Catalog
@inject NavigationManager Nav


@if (loading)
{
    <p>Loading...</p>
}
else if (figure is null)
{
    <p>Figure not found.</p>
}
else
{
    <div class="figure-detail">
        <div class="media"><img src="/images/@figure.ImageFile" alt="@figure.Name" loading="lazy" /></div>
        <div class="info">
            <h1>@figure.Name</h1>
            <div class="badge large">@figure.Category?.Name</div>
            <p class="description">@figure.Description</p>
            <div class="actions">
                <button class="btn" @onclick="NavigateBack">‚Üê Back</button>
            </div>
        </div>
    </div>
}

@code {
    [Parameter] public string Id { get; set; } = string.Empty;
    private Models.LegoFigure? figure;
    private bool loading = true;

    protected override async Task OnParametersSetAsync()
    {
        loading = true;
        figure = await Catalog.GetAsync(Id, CancellationToken.None);
        loading = false;
    }

    private void NavigateBack() => Nav.NavigateTo("/");
}
